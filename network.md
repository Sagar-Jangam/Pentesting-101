# Network

**IP Address**: A host/node identification address, network dependent, assigned to a device on a successful connection, may change with the change in network or even in case of re-connection. Example: **172.32.1.2**

**MAC Address**: A hardware identification address, bound with the hardware itself, globally unique, usually constant for a device unless the internal hardware is changed. Example: **ab:cd:ef:12:34:56**

**NIC**: Network Interface Card, the hardware component which facilitates a connection with the network. This is what is burned permanently with a MAC address. 

A device might have multiple NICs thus multiple MAC address. Additionally, a device may have multiple IP addresses depending upon the number of network it is connected to.

**IP Classes**: IP addresses are classified on the bases of the octets reserved for Networks and Hosts identification. Example: 192.168.11.2 is a Class C IP address where the first three octets are used for identifying the network whereas the last octet for identifying the host. 

**CIDR**: A classless representation to identifying the network and the host. Example: 192.168.12.3/24 implies that the first 24 bits are reserved for network and last 8 bits for the host.

**Subnet Mask**: An IP used for identifying a section of a subnet, this is not coupled with a device/ host instead a network. An IP address along with Subnet mask can be used to identify the host and network, and alternative to CIDR. Example: 255.255.255.0 implies the first three octets are reserved for identifying the network and the last for hosts. 

Let's use a scenario to move further:

**One to One** communicationm, Alice wants to send a message to Bob. 

| **Alice's Machine** | **Bob's Machine** |
| :--- | :--- |
| IP: 192.168.0.2 | IP: 192.168.0.3 |
| MAC: AA:AA:AA:AA:AA:AA | MAC: BB:BB:BB:BB:BB:BB |

To communicate, machines need to know each other's MAC address, this is how MACs are communicated: 

* Alice, types Bob's name with some command directing the machine to start a communication with Bob's machine
* Alice's machine then resolves Bob's name to an IP address via Cache, DNS, etc.
* Alice now broadcasts a message requesting all machines to identify themselves if they are at Bob's IP address

  **Message**

  * Source MAC: AA:AA:AA:AA:AA:AA 
  * Destination MAC: ff:ff:ff:ff:ff:ff 
  * Data: “Who has 192.168.0.3? Tell 192.168.0.2!

* A machine by default ignores messages which are not intended for them i.e. ignoring the messages which aren't marked with their MAC. Alice thus adds a broadcast MAC ff:ff:ff:ff:ff:ff to the message, with the broadcast address, all machines accept the message and then respond accordingly. 
* Bob gets the message and informs Alice with their MAC. 

  **Message**

  * Source MAC: BB:BB:BB:BB:BB:BB 
  * Destination MAC: AA:AA:AA:AA:AA:AA 
  * Data: “192.168.0.3 is at BB:BB:BB:BB:BB:BB!”

* Alice and Bob now have each other's MAC which they save in their local Caches for future use.
* After exchanging the MACs, Alice and Bob can now communicated with each other directly.

This exercise of finding MAC of each other's machine is knows as **Address Resolution Protocol**. Post the resolution the communication between the two machines starts.

**More than two machines,**  Alice wants to send a message to Bob but there are more than two machines in the network. 

* Network devices such as Hub and Switches are used to connect more than two devices in a network. 
* Hub are dumb devices as they forward all the traffic to all devices and expects only the intended device to accept the traffic. 
* This may cause congestion in the network
* Switches remember the MAC of each host and only send traffic to intended device. The switch would only send traffic to all device when it doesn't know the MAC for intended IP. 
* Everything else works the same as one to one communication. 

**Two networks,** Alice wants to send a message to Bob but Bob sits in separate network. 

| **Alice's Machine** | **Bob's Machine** |
| :--- | :--- |
| IP: 192.168.1.2 | IP: 192.168.2.3 |
| MAC: AA:AA:AA:AA:AA:AA | MAC: BB:BB:BB:BB:BB:BB |
| Subnet A | Subnet B |

* Router is used to connect more than one networks/ subnets. 
* The router sits in both the subnets and thus get an IP address from both the subnets.
* Router has two NIC and two MACs to facilitates siting in two networks. 
  * MAC1: cc:cc:cc:cc:cc:cc
  * IP1: 192.168.1.254 / 24
  * MAC2: dd:dd:dd:dd:dd:dd
  * IP2: 192.168.2.254 /24
* Alice types Bob's IP in a command, which triggers the communication
* As Bob's IP is in different network, Alice's machine send the packet to Router
  * Source MAC: aa:aa:aa:aa:aa:aa
  * Destination MAC: cc:cc:cc:cc:cc:cc \(the router’s first MAC!\)
  * Source IP: 192.168.1.2
  * Destination IP: 192.168.2.3 \(machine B’s IP!\)
* The router than sends the packets to Bob's machine
  * Source MAC: dd:dd:dd:dd:dd:dd \(the router’s second MAC\)
  * Destination MAC: bb:bb:bb:bb:bb:bb
  * Source IP: 192.168.1.2
  * Destination IP: 192.168.2.3
* When multiple such routers connect to each other we call this as the internet. 





